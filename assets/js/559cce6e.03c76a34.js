"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[237],{4340:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(23659),l=a(67294);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};var r=a(28308),o=function(t,e){return l.createElement(r.Z,(0,n.Z)((0,n.Z)({},t),{},{ref:e,icon:i}))};o.displayName="CloseCircleFilled";const s=l.forwardRef(o)},3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>h});var n=a(67294);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,l=function(t,e){if(null==t)return{};var a,n,l={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}var s=n.createContext({}),c=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):r(r({},e),t)),a},u=function(t){var e=c(t.components);return n.createElement(s.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var a=t.components,l=t.mdxType,i=t.originalType,s=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),d=c(a),h=l,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||i;return a?n.createElement(m,r(r({ref:e},u),{},{components:a})):n.createElement(m,r({ref:e},u))}));function h(t,e){var a=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var i=a.length,r=new Array(i);r[0]=d;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:l,r[1]=o;for(var c=2;c<i;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},53502:(t,e,a)=>{a.d(e,{Z:()=>N});var n=a(67294),l=a(86010);const i="availabilityCard_P5od",r="managedIcon_AxXO",o="platform_wqXv",s="platformAvailable_Y8lN";var c=a(4340),u=a(23659);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var d=a(28308),h=function(t,e){return n.createElement(d.Z,(0,u.Z)((0,u.Z)({},t),{},{ref:e,icon:p}))};h.displayName="CheckCircleFilled";const m=n.forwardRef(h);const k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var g=function(t,e){return n.createElement(d.Z,(0,u.Z)((0,u.Z)({},t),{},{ref:e,icon:k}))};g.displayName="CloudOutlined";const b=n.forwardRef(g),N=t=>{let{saasOnly:e,ossOnly:a}=t;return n.createElement("div",{className:(0,l.Z)(i,"card")},n.createElement("strong",null,"Feature Availability"),n.createElement("div",null,n.createElement("span",{className:(0,l.Z)(o,!e&&s)},"Self-Hosted DataHub ",e?n.createElement(c.Z,null):n.createElement(m,null))),n.createElement("div",null,n.createElement(b,{className:r}),n.createElement("span",{className:(0,l.Z)(o,!a&&s)},"Managed DataHub ",a?n.createElement(c.Z,null):n.createElement(m,null))))}},57347:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var n=a(83117),l=(a(67294),a(3905)),i=a(53502);const r={title:"Slack",slug:"/actions/actions/slack",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/actions/actions/slack.md"},o="Slack",s={unversionedId:"docs/actions/actions/slack",id:"docs/actions/actions/slack",title:"Slack",description:"|  |  |",source:"@site/genDocs/docs/actions/actions/slack.md",sourceDirName:"docs/actions/actions",slug:"/actions/actions/slack",permalink:"/datahub-project-forked/docs/actions/actions/slack",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/actions/actions/slack.md",tags:[],version:"current",frontMatter:{title:"Slack",slug:"/actions/actions/slack",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/actions/actions/slack.md"},sidebar:"overviewSidebar",previous:{title:"Hello World",permalink:"/datahub-project-forked/docs/actions/actions/hello_world"},next:{title:"Microsoft Teams",permalink:"/datahub-project-forked/docs/actions/actions/teams"}},c={},u=[{value:"Overview",id:"overview",level:2},{value:"Capabilities",id:"capabilities",level:3},{value:"User Experience",id:"user-experience",level:3},{value:"Supported Events",id:"supported-events",level:3},{value:"Action Quickstart",id:"action-quickstart",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Install the DataHub Slack App into your Slack workspace",id:"install-the-datahub-slack-app-into-your-slack-workspace",level:4},{value:"Getting Credentials and Configuration",id:"getting-credentials-and-configuration",level:4},{value:"1. The Signing Secret",id:"1-the-signing-secret",level:4},{value:"2. The Bot Token",id:"2-the-bot-token",level:4},{value:"3. The Slack Channel",id:"3-the-slack-channel",level:4},{value:"Installation Instructions (Deployment specific)",id:"installation-instructions-deployment-specific",level:3},{value:"Managed DataHub",id:"managed-datahub",level:4},{value:"Quickstart",id:"quickstart",level:4},{value:"k8s / helm",id:"k8s--helm",level:4},{value:"Bare Metal - CLI or Python-based",id:"bare-metal---cli-or-python-based",level:4},{value:"Sample Slack Action Configuration File",id:"sample-slack-action-configuration-file",level:5},{value:"Slack Action Configuration Parameters",id:"slack-action-configuration-parameters",level:5},{value:"Troubleshooting",id:"troubleshooting",level:2}],p={toc:u};function d(t){let{components:e,...a}=t;return(0,l.kt)("wrapper",(0,n.Z)({},p,a,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"slack"},"Slack"),(0,l.kt)(i.Z,{mdxType:"FeatureAvailability"}),(0,l.kt)("h1",{id:"slack-1"},"Slack"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Status")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("img",{parentName:"td",src:"https://img.shields.io/badge/support%20status-incubating-blue",alt:"Incubating"}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"Version Requirements")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("img",{parentName:"td",src:"https://img.shields.io/badge/acryl_datahub_actions-v0.0.9+-green.svg",alt:"Minimum Version Requirements"}))))),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"This Action integrates DataHub with Slack to send notifications to a configured Slack channel in your workspace."),(0,l.kt)("h3",{id:"capabilities"},"Capabilities"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sending notifications of important events to a Slack channel",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Adding or Removing a tag from an entity (dataset, dashboard etc.)"),(0,l.kt)("li",{parentName:"ul"},"Updating documentation at the entity or field (column) level. "),(0,l.kt)("li",{parentName:"ul"},"Adding or Removing ownership from an entity (dataset, dashboard, etc.)"),(0,l.kt)("li",{parentName:"ul"},"Creating a Domain"),(0,l.kt)("li",{parentName:"ul"},"and many more.")))),(0,l.kt)("h3",{id:"user-experience"},"User Experience"),(0,l.kt)("p",null,"On startup, the action will produce a welcome message that looks like the one below.\n",(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_welcome_message.png",alt:null})),(0,l.kt)("p",null,"On each event, the action will produce a notification message that looks like the one below.\n",(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_notification_message.png",alt:null})),(0,l.kt)("p",null,"Watch the townhall demo to see this in action:\n",(0,l.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=BlCLhG8lGoY&t=2998s"},(0,l.kt)("img",{parentName:"a",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_demo_image.png",alt:"Slack Action Demo"}))),(0,l.kt)("h3",{id:"supported-events"},"Supported Events"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"EntityChangeEvent_v1")),(0,l.kt)("li",{parentName:"ul"},"Currently, the ",(0,l.kt)("inlineCode",{parentName:"li"},"MetadataChangeLog_v1")," event is ",(0,l.kt)("strong",{parentName:"li"},"not")," processed by the Action.")),(0,l.kt)("h2",{id:"action-quickstart"},"Action Quickstart"),(0,l.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("p",null,"Ensure that you have configured the Slack App in your Slack workspace. "),(0,l.kt)("h4",{id:"install-the-datahub-slack-app-into-your-slack-workspace"},"Install the DataHub Slack App into your Slack workspace"),(0,l.kt)("p",null,"The following steps should be performed by a Slack Workspace Admin. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Navigate to  ",(0,l.kt)("a",{parentName:"li",href:"https://api.slack.com/apps/"},"https://api.slack.com/apps/")),(0,l.kt)("li",{parentName:"ul"},"Click Create New App"),(0,l.kt)("li",{parentName:"ul"},"Use \u201cFrom an app manifest\u201d option"),(0,l.kt)("li",{parentName:"ul"},"Select your workspace"),(0,l.kt)("li",{parentName:"ul"},"Paste this Manifest in YAML. We suggest changing the name and ",(0,l.kt)("inlineCode",{parentName:"li"},"display_name")," to be ",(0,l.kt)("inlineCode",{parentName:"li"},"DataHub App YOUR_TEAM_NAME")," but this is not required. This name will show up in your Slack workspace.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},'display_information:\n  name: DataHub App\n  description: An app to integrate DataHub with Slack\n  background_color: "#000000"\nfeatures:\n  bot_user:\n    display_name: DataHub App\n    always_online: false\noauth_config:\n  scopes:\n    bot:\n      - channels:history\n      - channels:read\n      - chat:write\n      - commands\n      - groups:read\n      - im:read\n      - mpim:read\n      - team:read\n      - users:read\n      - users:read.email\nsettings:\n  org_deploy_enabled: false\n  socket_mode_enabled: false\n  token_rotation_enabled: false\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Confirm you see the Basic Information Tab")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_basic_info.png",alt:null})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Click ",(0,l.kt)("strong",{parentName:"li"},"Install to Workspace")),(0,l.kt)("li",{parentName:"ul"},"It will show you permissions the Slack App is asking for, what they mean and a default channel in which you want to add the slack app",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Note that the Slack App will only be able to post in channels that the app has been added to. This is made clear by slack\u2019s Authentication screen also."))),(0,l.kt)("li",{parentName:"ul"},"Select the channel you'd like notifications to go to and click ",(0,l.kt)("strong",{parentName:"li"},"Allow")),(0,l.kt)("li",{parentName:"ul"},"Go to the DataHub App page",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"You can find your workspace's list of apps at ",(0,l.kt)("a",{parentName:"li",href:"https://api.slack.com/apps/"},"https://api.slack.com/apps/"))))),(0,l.kt)("h4",{id:"getting-credentials-and-configuration"},"Getting Credentials and Configuration"),(0,l.kt)("p",null,"Now that you've created your app and installed it in your workspace, you need a few pieces of information before you can activate your Slack action. "),(0,l.kt)("h4",{id:"1-the-signing-secret"},"1. The Signing Secret"),(0,l.kt)("p",null,"On your app's Basic Information page, you will see a App Credentials area. Take note of the Signing Secret information, you will need it later."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_app_credentials.png",alt:null})),(0,l.kt)("h4",{id:"2-the-bot-token"},"2. The Bot Token"),(0,l.kt)("p",null,"Navigate to the ",(0,l.kt)("strong",{parentName:"p"},"OAuth & Permissions")," Tab"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_oauth_and_permissions.png",alt:null})),(0,l.kt)("p",null,"Here you'll find a \u201cBot User OAuth Token\u201d which DataHub will need to communicate with your Slack workspace through the bot."),(0,l.kt)("h4",{id:"3-the-slack-channel"},"3. The Slack Channel"),(0,l.kt)("p",null,"Finally, you need to figure out which Slack channel you will send notifications to. Perhaps it should be called #datahub-notifications or maybe, #data-notifications or maybe you already have a channel where important notifications about datasets and pipelines are already being routed to. Once you have decided what channel to send notifications to, make sure to add the app to the channel. "),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_channel_add_app.png",alt:null})),(0,l.kt)("p",null,"Next, figure out the channel id for this Slack channel. You can find it in the About section for the channel if you scroll to the very bottom of the app.\n",(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_channel_id.png",alt:null})),(0,l.kt)("p",null,"Alternately, if you are on the browser, you can figure it out from the URL. e.g. for the troubleshoot channel in OSS DataHub slack"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/integrations/slack/slack_channel_url.png",alt:null})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Notice ",(0,l.kt)("inlineCode",{parentName:"li"},"TUMKD5EGJ/C029A3M079U")," in the URL",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Channel ID = ",(0,l.kt)("inlineCode",{parentName:"li"},"C029A3M079U")," from above")))),(0,l.kt)("p",null,"In the next steps, we'll show you how to configure the Slack Action based on the credentials and configuration values that you have collected."),(0,l.kt)("h3",{id:"installation-instructions-deployment-specific"},"Installation Instructions (Deployment specific)"),(0,l.kt)("h4",{id:"managed-datahub"},"Managed DataHub"),(0,l.kt)("p",null,"Head over to the ",(0,l.kt)("a",{parentName:"p",href:"/datahub-project-forked/docs/managed-datahub/saas-slack-setup#configuring-notifications"},"Configuring Notifications")," section in the Managed DataHub guide to configure Slack notifications for your Managed DataHub instance."),(0,l.kt)("h4",{id:"quickstart"},"Quickstart"),(0,l.kt)("p",null,"If you are running DataHub using the docker quickstart option, there are no additional software installation steps. The ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," container comes pre-installed with the Slack action. "),(0,l.kt)("p",null,"All you need to do is export a few environment variables to activate and configure the integration. See below for the list of environment variables to export."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Env Variable"),(0,l.kt)("th",{parentName:"tr",align:null},"Required for Integration"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_ENABLED"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},'Set to "true" to enable the Slack action')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_SIGNING_SECRET"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#1-the-signing-secret"},"Slack Signing Secret")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_BOT_TOKEN"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#2-the-bot-token"},"Bot User OAuth Token")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_CHANNEL"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#3-the-slack-channel"},"Slack Channel ID")," that you want the action to send messages to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_DATAHUB_BASE_URL"),(0,l.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,l.kt)("td",{parentName:"tr",align:null},'Defaults to "http://localhost:9002". Set to the location where your DataHub UI is running. On a local quickstart this is usually "http://localhost:9002", so you shouldn\'t need to modify this')))),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"You will have to restart the ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," docker container after you have exported these environment variables if this is the first time. The simplest way to do it is via the Docker Desktop UI, or by just issuing a ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub docker quickstart --stop && datahub docker quickstart")," command to restart the whole instance.")),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"export DATAHUB_ACTIONS_SLACK_ENABLED=true\nexport DATAHUB_ACTIONS_SLACK_SIGNING_SECRET=<slack-signing-secret>\n....\nexport DATAHUB_ACTIONS_SLACK_CHANNEL=<slack_channel_id>\n\ndatahub docker quickstart --stop && datahub docker quickstart\n")),(0,l.kt)("h4",{id:"k8s--helm"},"k8s / helm"),(0,l.kt)("p",null,"Similar to the quickstart scenario, there are no specific software installation steps. The ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," container comes pre-installed with the Slack action. You just need to export a few environment variables and make them available to the ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," container to activate and configure the integration. See below for the list of environment variables to export."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Env Variable"),(0,l.kt)("th",{parentName:"tr",align:null},"Required for Integration"),(0,l.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_ENABLED"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},'Set to "true" to enable the Slack action')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_SIGNING_SECRET"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#1-the-signing-secret"},"Slack Signing Secret")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_BOT_TOKEN"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#2-the-bot-token"},"Bot User OAuth Token")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_SLACK_CHANNEL"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#3-the-slack-channel"},"Slack Channel ID")," that you want the action to send messages to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DATAHUB_ACTIONS_DATAHUB_BASE_URL"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null},'Set to the location where your DataHub UI is running. For example, if your DataHub UI is hosted at "',(0,l.kt)("a",{parentName:"td",href:"https://datahub.my-company.biz%22"},'https://datahub.my-company.biz"'),', set this to "',(0,l.kt)("a",{parentName:"td",href:"https://datahub.my-company.biz%22"},'https://datahub.my-company.biz"'))))),(0,l.kt)("h4",{id:"bare-metal---cli-or-python-based"},"Bare Metal - CLI or Python-based"),(0,l.kt)("p",null,"If you are using the ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," library directly from Python, or the ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," cli directly, then you need to first install the ",(0,l.kt)("inlineCode",{parentName:"p"},"slack")," action plugin in your Python virtualenv. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'pip install "datahub-actions[slack]"\n')),(0,l.kt)("p",null,"Then run the action with a configuration file that you have modified to capture your credentials and configuration."),(0,l.kt)("h5",{id:"sample-slack-action-configuration-file"},"Sample Slack Action Configuration File"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yml"},'name: datahub_slack_action\nenabled: true\nsource:\n  type: "kafka"\n  config:\n    connection:\n      bootstrap: ${KAFKA_BOOTSTRAP_SERVER:-localhost:9092}\n      schema_registry_url: ${SCHEMA_REGISTRY_URL:-http://localhost:8081}\n    topic_routes:\n      mcl: ${METADATA_CHANGE_LOG_VERSIONED_TOPIC_NAME:-MetadataChangeLog_Versioned_v1}\n      pe: ${PLATFORM_EVENT_TOPIC_NAME:-PlatformEvent_v1}\n\n## 3a. Optional: Filter to run on events (map)\n# filter: \n#  event_type: <filtered-event-type>\n#  event:\n#    # Filter event fields by exact-match\n#    <filtered-event-fields>\n\n# 3b. Optional: Custom Transformers to run on events (array)\n# transform:\n#  - type: <transformer-type>\n#    config: \n#      # Transformer-specific configs (map)\n\naction:\n  type: slack\n  config:\n    # Action-specific configs (map)\n    base_url: ${DATAHUB_ACTIONS_SLACK_DATAHUB_BASE_URL:-http://localhost:9002}\n    bot_token: ${DATAHUB_ACTIONS_SLACK_BOT_TOKEN}\n    signing_secret: ${DATAHUB_ACTIONS_SLACK_SIGNING_SECRET}\n    default_channel: ${DATAHUB_ACTIONS_SLACK_CHANNEL}\n    suppress_system_activity: ${DATAHUB_ACTIONS_SLACK_SUPPRESS_SYSTEM_ACTIVITY:-true}\n\ndatahub:\n  server: "http://${DATAHUB_GMS_HOST:-localhost}:${DATAHUB_GMS_PORT:-8080}"\n  \n')),(0,l.kt)("h5",{id:"slack-action-configuration-parameters"},"Slack Action Configuration Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Field"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Default"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"base_url")),(0,l.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"False")),(0,l.kt)("td",{parentName:"tr",align:null},"Whether to print events in upper case.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"signing_secret")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#1-the-signing-secret"},"Slack Signing Secret")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bot_token")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#2-the-bot-token"},"Bot User OAuth Token")," that you configured in the pre-requisites step above")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"default_channel")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Set to the ",(0,l.kt)("a",{parentName:"td",href:"#3-the-slack-channel"},"Slack Channel ID")," that you want the action to send messages to")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"suppress_system_activity")),(0,l.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"True")),(0,l.kt)("td",{parentName:"tr",align:null},"Set to ",(0,l.kt)("inlineCode",{parentName:"td"},"False")," if you want to get low level system activity events, e.g. when datasets are ingested, etc. Note: this will currently result in a very spammy Slack notifications experience, so this is not recommended to be changed.")))),(0,l.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,l.kt)("p",null,"If things are configured correctly, you should see logs on the ",(0,l.kt)("inlineCode",{parentName:"p"},"datahub-actions")," container that indicate success in enabling and running the Slack action. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker logs datahub-datahub-actions-1\n\n...\n[2022-12-04 07:07:53,804] INFO     {datahub_actions.plugin.action.slack.slack:96} - Slack notification action configured with bot_token=SecretStr('**********') signing_secret=SecretStr('**********') default_channel='C04CZUSSR5X' base_url='http://localhost:9002' suppress_system_activity=True\n[2022-12-04 07:07:54,506] WARNING  {datahub_actions.cli.actions:103} - Skipping pipeline datahub_teams_action as it is not enabled\n[2022-12-04 07:07:54,506] INFO     {datahub_actions.cli.actions:119} - Action Pipeline with name 'ingestion_executor' is now running.\n[2022-12-04 07:07:54,507] INFO     {datahub_actions.cli.actions:119} - Action Pipeline with name 'datahub_slack_action' is now running.\n...\n")),(0,l.kt)("p",null,"If the Slack action was not enabled, you would see messages indicating that.\ne.g. the following logs below show that neither the Slack or Teams action were enabled. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker logs datahub-datahub-actions-1\n\n....\nNo user action configurations found. Not starting user actions.\n[2022-12-04 06:45:27,509] INFO     {datahub_actions.cli.actions:76} - DataHub Actions version: unavailable (installed editable via git)\n[2022-12-04 06:45:27,647] WARNING  {datahub_actions.cli.actions:103} - Skipping pipeline datahub_slack_action as it is not enabled\n[2022-12-04 06:45:27,649] WARNING  {datahub_actions.cli.actions:103} - Skipping pipeline datahub_teams_action as it is not enabled\n[2022-12-04 06:45:27,649] INFO     {datahub_actions.cli.actions:119} - Action Pipeline with name 'ingestion_executor' is now running.\n...\n\n")))}d.isMDXComponent=!0}}]);