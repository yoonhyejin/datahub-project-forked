"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[567],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),s=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=s(a),c=n,m=h["".concat(p,".").concat(c)]||h[c]||d[c]||i;return a?r.createElement(m,o(o({ref:t},u),{},{components:a})):r.createElement(m,o({ref:t},u))}));function c(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},18950:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=a(83117),n=(a(67294),a(3905));const i={title:"Getting Started",slug:"/api/graphql/getting-started",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/graphql/getting-started.md"},o="Getting Started",l={unversionedId:"docs/api/graphql/getting-started",id:"docs/api/graphql/getting-started",title:"Getting Started",description:"Get started using the DataHub GraphQL API.",source:"@site/genDocs/docs/api/graphql/getting-started.md",sourceDirName:"docs/api/graphql",slug:"/api/graphql/getting-started",permalink:"/datahub-project-forked/docs/api/graphql/getting-started",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/graphql/getting-started.md",tags:[],version:"current",frontMatter:{title:"Getting Started",slug:"/api/graphql/getting-started",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/graphql/getting-started.md"},sidebar:"overviewSidebar",previous:{title:"Scalars",permalink:"/datahub-project-forked/docs/graphql/scalars"},next:{title:"Working with Metadata Entities",permalink:"/datahub-project-forked/docs/api/graphql/querying-entities"}},p={},s=[{value:"Setup",id:"setup",level:2},{value:"Querying the GraphQL API",id:"querying-the-graphql-api",level:2},{value:"GraphQL Explorer",id:"graphql-explorer",level:3},{value:"CURL",id:"curl",level:3},{value:"Postman",id:"postman",level:3},{value:"Authentication + Authorization",id:"authentication--authorization",level:4},{value:"Reading an Entity: Queries",id:"reading-an-entity-queries",level:2},{value:"Query",id:"query",level:3},{value:"Search",id:"search",level:3},{value:"Modifying an Entity: Mutations",id:"modifying-an-entity-mutations",level:2},{value:"Handling Errors",id:"handling-errors",level:2}],u={toc:s};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"getting-started"},"Getting Started"),(0,n.kt)("p",null,"Get started using the DataHub GraphQL API."),(0,n.kt)("h2",{id:"setup"},"Setup"),(0,n.kt)("p",null,"The first thing you'll need to use the GraphQL API is a deployed instance of DataHub with some metadata ingested. Unsure how to do that? Check out the ",(0,n.kt)("a",{parentName:"p",href:"/datahub-project-forked/docs/quickstart"},"Deployment Quickstart"),"."),(0,n.kt)("h2",{id:"querying-the-graphql-api"},"Querying the GraphQL API"),(0,n.kt)("p",null,"DataHub's GraphQL endpoint is served at the path ",(0,n.kt)("inlineCode",{parentName:"p"},"/api/graphql"),", e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},"https://my-company.datahub.com/api/graphql"),".\nThere are a few options when it comes to querying the GraphQL endpoint."),(0,n.kt)("p",null,"For ",(0,n.kt)("strong",{parentName:"p"},"Testing"),", we recommend ",(0,n.kt)("a",{parentName:"p",href:"https://learning.postman.com/docs/sending-requests/supported-api-frameworks/graphql/"},"Postman"),", GraphQL Explorer (described below), or CURL.\nFor ",(0,n.kt)("strong",{parentName:"p"},"Production"),", we recommend a GraphQL ",(0,n.kt)("a",{parentName:"p",href:"https://graphql.org/code/"},"Client SDK")," for the language of your choice, or a basic HTTP client."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Notice: The DataHub GraphQL endpoint only supports POST requests at this time.")),(0,n.kt)("h3",{id:"graphql-explorer"},"GraphQL Explorer"),(0,n.kt)("p",null,"DataHub provides a browser-based GraphQL Explorer Tool (",(0,n.kt)("a",{parentName:"p",href:"https://github.com/graphql/graphiql"},"GraphiQL"),") for live interaction with the GraphQL API. This tool is available at the path ",(0,n.kt)("inlineCode",{parentName:"p"},"/api/graphiql")," (e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},"https://my-company.datahub.com/api/graphiql"),")\nThis interface allows you to easily craft queries and mutations against real metadata stored in your live DataHub deployment. For a detailed usage guide,\ncheck out ",(0,n.kt)("a",{parentName:"p",href:"https://www.gatsbyjs.com/docs/how-to/querying-data/running-queries-with-graphiql/"},"How to use GraphiQL"),". "),(0,n.kt)("h3",{id:"curl"},"CURL"),(0,n.kt)("h3",{id:"postman"},"Postman"),(0,n.kt)("h4",{id:"authentication--authorization"},"Authentication + Authorization"),(0,n.kt)("p",null,"In general, you'll need to provide an ",(0,n.kt)("a",{parentName:"p",href:"/datahub-project-forked/docs/authentication/personal-access-tokens"},"Access Token")," when querying the GraphQL by\nproviding an ",(0,n.kt)("inlineCode",{parentName:"p"},"Authorization")," header containing a ",(0,n.kt)("inlineCode",{parentName:"p"},"Bearer")," token. The header should take the following format:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"Authorization: Bearer <access-token>\n")),(0,n.kt)("p",null,"Authorization for actions exposed by the GraphQL endpoint will be performed based on the actor making the request.\nFor Personal Access Tokens, the token will carry the user's privileges. Please refer to ",(0,n.kt)("a",{parentName:"p",href:"/datahub-project-forked/docs/api/graphql/token-management"},"Access Token Management")," for more information."),(0,n.kt)("h2",{id:"reading-an-entity-queries"},"Reading an Entity: Queries"),(0,n.kt)("p",null,"DataHub provides the following GraphQL queries for retrieving entities in your Metadata Graph."),(0,n.kt)("p",null,"[more general explanation on queries and searches]"),(0,n.kt)("h3",{id:"query"},"Query"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Querying for Owners of an entity"),(0,n.kt)("li",{parentName:"ul"},"Querying for Tags of an asset"),(0,n.kt)("li",{parentName:"ul"},"Querying for Domain of an asset"),(0,n.kt)("li",{parentName:"ul"},"Querying for Glossary Terms of an asset"),(0,n.kt)("li",{parentName:"ul"},"Querying for Deprecation of an asset")),(0,n.kt)("h3",{id:"search"},"Search"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Searching for a certain dataset")),(0,n.kt)("h2",{id:"modifying-an-entity-mutations"},"Modifying an Entity: Mutations"),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"}," Mutations which change Entity metadata are subject to ",(0,n.kt)("a",{parentName:"p",href:"/datahub-project-forked/docs/authorization/policies"},"DataHub Access Policies"),".\nThis means that DataHub's server will check whether the requesting actor is authorized to perform the action. ")),(0,n.kt)("p",null,"[more general explanation on mutation]"," "),(0,n.kt)("p",null,"Examples of mutation includes: "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Updating a Metadata Entity"),(0,n.kt)("li",{parentName:"ul"},"Adding & Removing Tags"),(0,n.kt)("li",{parentName:"ul"},"Adding & Removing Glossary Terms"),(0,n.kt)("li",{parentName:"ul"},"Adding & Removing Domain"),(0,n.kt)("li",{parentName:"ul"},"Adding & Removing Owners"),(0,n.kt)("li",{parentName:"ul"},"Updating Deprecation"),(0,n.kt)("li",{parentName:"ul"},"Editing Description (i.e. Documentation)"),(0,n.kt)("li",{parentName:"ul"},"Soft Deleting")),(0,n.kt)("p",null,"Please refer to Datahub API Comparison to navigate to the use-case oriented guide. "),(0,n.kt)("h2",{id:"handling-errors"},"Handling Errors"),(0,n.kt)("p",null,"In GraphQL, requests that have errors do not always result in a non-200 HTTP response body. Instead, errors will be\npresent in the response body inside a top-level ",(0,n.kt)("inlineCode",{parentName:"p"},"errors")," field. "),(0,n.kt)("p",null,"This enables situations in which the client is able to deal gracefully will partial data returned by the application server.\nTo verify that no error has returned after making a GraphQL request, make sure you check ",(0,n.kt)("em",{parentName:"p"},"both")," the ",(0,n.kt)("inlineCode",{parentName:"p"},"data")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"errors")," fields that are returned. "),(0,n.kt)("p",null,"To catch a GraphQL error, simply check the ",(0,n.kt)("inlineCode",{parentName:"p"},"errors")," field side the GraphQL response. It will contain a message, a path, and a set of extensions\nwhich contain a standard error code. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "errors":[\n      {\n         "message":"Failed to change ownership for resource urn:li:dataFlow:(airflow,dag_abc,PROD). Expected a corp user urn.",\n         "locations":[\n            {\n               "line":1,\n               "column":22\n            }\n         ],\n         "path":[\n            "addOwners"\n         ],\n         "extensions":{\n            "code":400,\n            "type":"BAD_REQUEST",\n            "classification":"DataFetchingException"\n         }\n      }\n   ]\n}\n')),(0,n.kt)("p",null,"With the following error codes officially supported:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Code"),(0,n.kt)("th",{parentName:"tr",align:null},"Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"400"),(0,n.kt)("td",{parentName:"tr",align:null},"BAD_REQUEST"),(0,n.kt)("td",{parentName:"tr",align:null},"The query or mutation was malformed.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"403"),(0,n.kt)("td",{parentName:"tr",align:null},"UNAUTHORIZED"),(0,n.kt)("td",{parentName:"tr",align:null},"The current actor is not authorized to perform the requested action.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"404"),(0,n.kt)("td",{parentName:"tr",align:null},"NOT_FOUND"),(0,n.kt)("td",{parentName:"tr",align:null},"The resource is not found.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"500"),(0,n.kt)("td",{parentName:"tr",align:null},"SERVER_ERROR"),(0,n.kt)("td",{parentName:"tr",align:null},"An internal error has occurred. Check your server logs or contact your DataHub administrator.")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Visit our ",(0,n.kt)("a",{parentName:"p",href:"https://slack.datahubproject.io"},"Slack channel")," to ask questions, tell us what we can do better, & make requests for what you'd like to see in the future. Or just\nstop by to say 'Hi'. ")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Visit our ",(0,n.kt)("a",{parentName:"p",href:"https://slack.datahubproject.io"},"Slack channel")," to ask questions, tell us what we can do better, & make requests for what you'd like to see in the future. Or just\nstop by to say 'Hi'.")))}d.isMDXComponent=!0}}]);